<?xml version="1.0" encoding="UTF-8"?>
<project xmlns="http://maven.apache.org/POM/4.0.0"
         xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"
         xsi:schemaLocation="http://maven.apache.org/POM/4.0.0 http://maven.apache.org/xsd/maven-4.0.0.xsd">
    <modelVersion>4.0.0</modelVersion>
    <parent>
        <groupId>org.hulei</groupId>
        <artifactId>spring-boot-vue</artifactId>
        <version>1.0.0.4-SNAPSHOT</version>
    </parent>

    <artifactId>vue3-vite</artifactId>

    <properties>
        <maven.compiler.source>17</maven.compiler.source>
        <maven.compiler.target>17</maven.compiler.target>
        <project.build.sourceEncoding>UTF-8</project.build.sourceEncoding>

        <npm>C:\dataz\node-v18.20.5-win-x64\npm.cmd</npm>
    </properties>

    <profiles>
        <profile>
            <id>ui</id>
            <activation>
                <!-- 这个部分配置了该profile在默认情况下是激活的，即使没有明确指定profile id，这个profile也会被激活。 -->
                <activeByDefault>true</activeByDefault>
            </activation>
            <!-- build用于配置构建相关的信息 -->
            <build>
                <plugins>
                    <!-- 这个插件在clean阶段会使用 -->
                    <plugin>
                        <groupId>org.apache.maven.plugins</groupId>
                        <artifactId>maven-clean-plugin</artifactId>
                        <configuration>
                            <filesets>
                                <fileset>
                                    <directory>dist</directory>
                                </fileset>
                                <!--                                 <fileset> -->
                                <!--                                     <directory>node_modules</directory> -->
                                <!--                                 </fileset> -->
                            </filesets>
                        </configuration>
                    </plugin>


<!--                     <plugin> -->
<!--                         <groupId>com.github.eirslett</groupId> -->
<!--                         <artifactId>frontend-maven-plugin</artifactId> -->
<!--                         <version>1.15.1</version> -->
<!--                         <configuration> -->
<!--                             &lt;!&ndash; <installDirectory>target</installDirectory> &ndash;&gt; -->
<!--                             &lt;!&ndash; <workingDirectory>src/main/frontend</workingDirectory> &ndash;&gt; -->
<!--                             <nodeVersion>v18.20.4</nodeVersion> -->
<!--                             <npmVersion>10.7.0</npmVersion> -->

<!--                             &lt;!&ndash; 配置淘宝镜像，国内拉取太慢了 &ndash;&gt; -->
<!--                             <nodeDownloadRoot>http://nodejs.org/dist/</nodeDownloadRoot> -->
<!--                             <npmDownloadRoot>http://registry.npmjs.org/npm/-/</npmDownloadRoot> -->
<!--                         </configuration> -->
<!--                         <executions> -->
<!-- &lt;!&ndash;                             <execution> &ndash;&gt; -->
<!-- &lt;!&ndash;                                 <id>install node and npm</id> &ndash;&gt; -->
<!-- &lt;!&ndash;                                 <goals> &ndash;&gt; -->
<!-- &lt;!&ndash;                                     <goal>install-node-and-npm</goal> &ndash;&gt; -->
<!-- &lt;!&ndash;                                 </goals> &ndash;&gt; -->
<!-- &lt;!&ndash;                             </execution> &ndash;&gt; -->
<!--                             <execution> -->
<!--                                 <id>npm install</id> -->
<!--                                 <goals> -->
<!--                                     <goal>npm</goal> -->
<!--                                 </goals> -->
<!--                                 <configuration> -->
<!--                                     <arguments>install</arguments> -->
<!--                                 </configuration> -->
<!--                             </execution> -->
<!--                             <execution> -->
<!--                                 <id>npm build</id> -->
<!--                                 <goals> -->
<!--                                     <goal>npm</goal> -->
<!--                                 </goals> -->
<!--                                 <configuration> -->
<!--                                     <arguments>run build</arguments> -->
<!--                                 </configuration> -->
<!--                             </execution> -->
<!--                         </executions> -->
<!--                     </plugin> -->

                    <plugin>
                        <groupId>org.codehaus.mojo</groupId>
                        <artifactId>exec-maven-plugin</artifactId>
                        <executions>
                            <execution>
                                <id>run-npm-install</id>
                                <phase>compile</phase>
                                <goals>
                                    <goal>exec</goal>
                                </goals>
                                <configuration>
                                    <executable>${npm}</executable>
                                    <arguments>
                                        <argument>install</argument>
                                    </arguments>
                                </configuration>
                            </execution>
                            <execution>
                                <id>npm build</id>
                                <phase>compile</phase>
                                <goals>
                                    <goal>exec</goal>
                                </goals>
                                <configuration>
                                    <executable>${npm}</executable>
                                    <arguments>
                                        <argument>run</argument>
                                        <argument>build</argument>
                                    </arguments>
                                </configuration>
                            </execution>
                        </executions>
                    </plugin>


                    <!--                     <plugin> -->
<!--                         &lt;!&ndash; 这个插件的github文档明确指出了这个插件不支持使用本地的node进行构建,原文:Notice: This plugin does not support already installed Node or npm versions. Use the exec-maven-plugin instead. &ndash;&gt; -->
<!--                         <groupId>com.github.eirslett</groupId> -->
<!--                         <artifactId>frontend-maven-plugin</artifactId> -->
<!--                         <version>1.15.1</version> -->
<!--                         <executions> -->
<!--                             &lt;!&ndash; 不指定安装node和npm,直接使用系统自带的 &ndash;&gt; -->
<!--                             <execution> -->
<!--                                 <id>install node and npm</id> -->
<!--                                 &lt;!&ndash; 定义了要执行的目标。在这个例子中，目标是 install-node-and-npm，即安装 Node.js 和 npm。 &ndash;&gt; -->
<!--                                 <goals> -->
<!--                                     <goal>install-node-and-npm</goal> -->
<!--                                 </goals> -->
<!--                                 &lt;!&ndash; 指定要安装的 Node.js &ndash;&gt; -->
<!--                                 <configuration> -->
<!--                                     <npmVersion>10.7.0</npmVersion> -->
<!--                                     <nodeVersion>v18.20.4</nodeVersion> -->
<!--                                 </configuration> -->
<!--                                 &lt;!&ndash; optional: default phase is "generate-resources" &ndash;&gt; -->
<!--                                 &lt;!&ndash; 这个操作默认就在generate-resources这个极端,所以在compile的时候会安装node和npm &ndash;&gt; -->
<!--                                 <phase>generate-resources</phase> -->
<!--                             </execution> -->

<!--                             &lt;!&ndash; Install all project dependencies &ndash;&gt; -->
<!--                             <execution> -->
<!--                                 <id>npm install</id> -->
<!--                                 &lt;!&ndash; 目标是 npm，即运行 npm 命令。 &ndash;&gt; -->
<!--                                 <goals> -->
<!--                                     <goal>npm</goal> -->
<!--                                 </goals> -->
<!--                                 &lt;!&ndash; optional: default phase is "generate-resources" &ndash;&gt; -->
<!--                                 &lt;!&ndash; 指定在 generate-resources 阶段执行。 &ndash;&gt; -->
<!--                                 <phase>generate-resources</phase> -->
<!--                                 &lt;!&ndash; Optional configuration which provides for running any npm command &ndash;&gt; -->
<!--                                 &lt;!&ndash; 运行 npm install 命令以安装项目依赖。 &ndash;&gt; -->
<!--                                 <configuration> -->
<!--                                     <arguments>install</arguments> -->
<!--                                 </configuration> -->
<!--                             </execution> -->

<!--                             &lt;!&ndash; Build and minify static files &ndash;&gt; -->
<!--                             <execution> -->
<!--                                 <id>npm run build</id> -->
<!--                                 &lt;!&ndash; 目标是 npm，即运行 npm 命令。 &ndash;&gt; -->
<!--                                 <goals> -->
<!--                                     <goal>npm</goal> -->
<!--                                 </goals> -->
<!--                                 &lt;!&ndash; 运行 npm run build 命令以构建和压缩静态文件。 &ndash;&gt; -->
<!--                                 <configuration> -->
<!--                                     <arguments>run build</arguments> -->
<!--                                 </configuration> -->
<!--                             </execution> -->
<!--                         </executions> -->
<!--                     </plugin> -->
                </plugins>
            </build>
        </profile>
    </profiles>

</project>