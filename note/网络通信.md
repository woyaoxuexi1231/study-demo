### 四层网络模型和七层网络模型

TCP/IP协议把网络体系结构分为了四层  
网络接口层(物理层+数据链路层)->网际层IP(网络层)->运输层TC->应用层(会话层,表示层,应用层)

OSI七层网络模型
物理层->数据链路层->网络层->运输层->会话层->表示层->应用层

### TCP协议和UDP协议

TCP:

1. 面向连接[建立连接后才开始进行传输],就像打电话,必须要两端都确认
   SYN->SYN+ACK->ACK
2. 可靠交付[通过协议内定义的序列号,应答/重传]
3. 全双工[两端设有发送和接收缓存]
4. 面向字节流[数据以流的形式传输]

UDP:

1. 无连接的,就像写信,不管对方收没收到(尽管现在也有确认机制了)
2. 尽最大努力交付
3. 面向报文的

UDP协议就是只管发,也不管对方收没收到.所以协议性能很好,资源占用很少.
在 UDP 中，应用程序发送的数据被视为一个完整的数据报文。这意味着，如果发送的数据小于 UDP 的最大数据报文长度（通常是 65507 字节），则整个数据将被封装在一个 UDP 数据报文中，并且作为一个整体进行传输。
然而，如果发送的数据超过了 UDP 的最大数据报文长度，UDP 协议本身并不会对数据进行分段。相反，操作系统会负责将大的数据报文分割成适当大小的数据报文，并将这些数据报文分别发送。这种分割发生在 IP 层，而不是 UDP 层，这意味着 UDP 协议本身并不关心数据是否被分割，也不负责数据的重组。

### TCP协议的三次握手和四次挥手

1. 为什么需要发送确认回报呢? - 防止以失效的连接请求报文段
   假设只有两次握手:  
   客户端首先发了一个SYN包来请求建立连接->但是由于网络原因,服务器一直没有收到->客户端由于接收服务器的确认超时,所以重发一边SYN包
   ->第二次发的数据包成功送达服务器,服务器响应->客户端收到第二次的响应成功建立连接,但是与此同时,第一次发的SYN包到达了服务器,服务器同意了这一次的连接  
   到此,原本只建立一个连接的目的,实际却建立了两个连接,导致了服务器的资源浪费  
   如果采用了三次握手,那么服务器在没有收到三次握手的确认时,是不会建立连接的. ps:如果三次握手客户端的ACK回报延迟了,那么服务器会重发SYN+ACK包

2. 为什么需要四次挥手呢? - 双方都要确认连接关闭
   连接关闭时,客户端和服务端都可以主动发起. FIN->ACK FIN-ACK
   这里重点就在于第四次挥手时,接收方需要等待时间.原因就是如果第四次挥手(ACK)在网络中丢失了,那么另一端会因为没有收到ACK而选择重传FIN包,这样接收端还能进行重新确认,不至于让另一端关闭不了.

### TCP协议是如何保证可靠的 - [滑动窗口,超时重传,选择确认]

网络传输本身是不可靠的,TCP就是一个在不可靠的信道上建立一个可靠传输的协议.

1. 丢包问题: 一包数据可能会被拆分成多个包进行发送,这就会导致丢包
2. 乱序问题: 多个包到达的顺序可能会出现乱序

在发送缓冲区内,每一个字节都有一个序列号,发送报文的时候会从发送缓冲区取出一部分报文(**滑动窗口**),报文内带有序列号和长度,这样就确定了此次发送了哪些数据
接收端在收到报文之后,需要回复确认报文,确认报文的编号就是序列号+此次接收端收到的长度,也意味着下一次服务端需要发送的数据的起始编号是从这个确认报文的ack开始
如果说发送了100,但是接收端只收到了50,那么确认号就可以从51开始(**选择重传,选择确认**),对于没有收到的不进行确认,确认总是有序的,从小到大的连续的确认(这样就解决了乱序问题)
如果说服务端长时间没有收到客户端发来的确认报文,那么就会触发重传机制(**超时重传**)

### 什么是RPC

RPC-Remote Procedure Call 远程过程调用, 允许一个计算机程序调用另一个远程计算机上的服务或函数，就像调用本地函数一样

RPC 协议的工作原理通常如下：

1. **客户端调用：** 客户端程序发起远程调用请求，调用远程服务上的某个函数或方法。
2. **消息传输：** 客户端通过网络将远程调用请求发送到远程计算机上的服务端程序。
3. **服务端响应：** 服务端收到远程调用请求后，执行相应的函数或方法，并将结果返回给客户端。
4. **结果返回：** 服务端将函数或方法的执行结果通过网络返回给客户端。
5. **客户端接收：** 客户端接收到远程调用的执行结果，继续执行后续的逻辑。

RPC 协议通常隐藏了网络通信的细节，使得远程调用的过程对开发者来说更加透明。开发者可以像调用本地函数一样调用远程函数，而不需要关心网络传输、序列化、反序列化等细节。常见的 RPC 协议包括 gRPC、Apache Thrift、JSON-RPC 等。  
RPC 协议在分布式系统和微服务架构中得到广泛应用，可以方便地实现服务之间的通信和协作，提高了系统的灵活性、可扩展性和可维护性。

而我们使用的Dubbo框架则是使用的自定义的Dubbo协议,当然也是基于rpc的.

### 数字签名和CA数字证书的原理
